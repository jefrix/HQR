// HQR Visualization Component
const { useState } = React;
const { 
  LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, 
  ResponsiveContainer, ScatterChart, Scatter, ZAxis
} = Recharts;

const HQRVisualization = () => {
  const [dimension, setDimension] = useState('4D');
  
  // Generate wave function data for Bohmian mechanics
  const generateWaveFunction = (dimension) => {
    const data = [];
    for (let x = -10; x <= 10; x += 0.2) {
      // Gaussian packet modulated by phase
      const amplitude = Math.exp(-x*x / 4);
      const phase = x*x / 2;
      // Different complexity for different dimensions
      const complexity = dimension === '4D' ? 1 : 2.5;
      
      // Wave function components R and S in Ψ = R e^(iS/ℏ)
      const r = amplitude;
      const s = phase * complexity;
      
      // Bohmian velocity from guiding equation dx/dt = ∇S/m
      // Approximating ∇S with finite difference
      const gradS = (x === -10) ? (s - 0) / 0.2 : (s - data[data.length-1].s) / 0.2;
      const velocity = gradS / 1; // m = 1 for simplicity
      
      // Hidden order correlation
      // Simulate correlation function with exponential decay modulated by oscillations
      const hiddenOrder = amplitude * Math.cos(complexity * x / 2) * Math.exp(-Math.abs(x) / 5);
      
      data.push({
        x,
        r,
        s,
        velocity,
        hiddenOrder,
        // Real and imaginary parts of the wave function
        realPart: r * Math.cos(s),
        imagPart: r * Math.sin(s),
        // Probability density
        probability: r * r
      });
    }
    return data;
  };

  // Generate 2D projection of higher-dimensional manifold (simplified Calabi-Yau)
  const generateManifoldData = (dimension) => {
    const data = [];
    const resolution = 20;
    const scale = dimension === '4D' ? 1 : 2;
    
    for (let i = 0; i <= resolution; i++) {
      const u = (i / resolution) * Math.PI * 2;
      for (let j = 0; j <= resolution; j++) {
        const v = (j / resolution) * Math.PI;
        
        // Parametric equations for a simplified projection of higher dimensional space
        let x, y, z;
        
        if (dimension === '4D') {
          // Simpler 4D projection
          x = Math.sin(u) * Math.sin(v);
          y = Math.sin(u) * Math.cos(v);
          z = Math.cos(u);
        } else {
          // More complex 11D projection with extra modulations
          x = Math.sin(u) * Math.sin(v) + 0.3 * Math.sin(3 * u);
          y = Math.sin(u) * Math.cos(v) + 0.3 * Math.cos(2 * v);
          z = Math.cos(u) + 0.2 * Math.sin(5 * v);
        }
        
        // Correlation function value as color intensity
        const correlation = Math.pow(Math.cos(scale * u) * Math.sin(scale * v), 2);
        
        data.push({ x: x * 10, y: y * 10, z: z * 5, value: correlation });
      }
    }
    return data;
  };

  // Generate data based on the selected dimension
  const waveData = generateWaveFunction(dimension);
  const manifoldData = generateManifoldData(dimension);
  
  // Customize the tooltip for wave function data
  const WaveFunctionTooltip = ({ active, payload }) => {
    if (active && payload && payload.length) {
      return (
        <div style={{backgroundColor: 'white', border: '1px solid #ccc', padding: '10px', borderRadius: '5px'}}>
          <p style={{margin: '0', fontSize: '12px'}}>{`Position (x): ${payload[0].payload.x.toFixed(2)}`}</p>
          <p style={{margin: '0', fontSize: '12px'}}>{`Amplitude (R): ${payload[0].payload.r.toFixed(4)}`}</p>
          <p style={{margin: '0', fontSize: '12px'}}>{`Phase (S): ${payload[0].payload.s.toFixed(4)}`}</p>
          <p style={{margin: '0', fontSize: '12px'}}>{`Velocity (∇S/m): ${payload[0].payload.velocity.toFixed(4)}`}</p>
          <p style={{margin: '0', fontSize: '12px'}}>{`Hidden Order: ${payload[0].payload.hiddenOrder.toFixed(4)}`}</p>
        </div>
      );
    }
    return null;
  };

  return (
    <div style={{fontFamily: 'Roboto, sans-serif', margin: '20px 0', padding: '20px', backgroundColor: '#f8f9fa', borderRadius: '8px'}}>
      <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>
        <h3 style={{color: '#1e3a8a', fontSize: '24px', margin: '0'}}>Holonomic Quantum Reality (HQR) Mathematical Visualization</h3>
        <div style={{display: 'flex', alignItems: 'center'}}>
          <span style={{marginRight: '10px', fontSize: '14px', fontWeight: '500'}}>Dimension:</span>
          <select 
            value={dimension} 
            onChange={(e) => setDimension(e.target.value)}
            style={{padding: '5px', borderRadius: '4px', fontSize: '14px'}}
          >
            <option value="4D">4D Reality</option>
            <option value="11D">11D M-Theory</option>
          </select>
        </div>
      </div>
      
      <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(500px, 1fr))', gap: '20px'}}>
        {/* Bohmian Mechanics Visualization */}
        <div style={{backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 1px 3px rgba(0,0,0,0.1)'}}>
          <h4 style={{color: '#1e40af', fontSize: '18px', marginTop: '0'}}>
            Bohmian Mechanics Wave Function (Ψ = Re<sup>iS/ℏ</sup>)
          </h4>
          <p style={{fontSize: '12px', color: '#666', marginBottom: '15px'}}>
            Visualizing components of the wave function and velocity field from guiding equation: dx/dt = ∇S/m
          </p>
          <div style={{height: '300px'}}>
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={waveData} margin={{ top: 5, right: 30, left: 10, bottom: 5 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  dataKey="x" 
                  label={{ value: 'Position (x)', position: 'insideBottomRight', offset: -10 }} 
                />
                <YAxis 
                  label={{ value: 'Value', angle: -90, position: 'insideLeft' }} 
                  domain={[-1.2, 1.2]}
                />
                <Tooltip content={<WaveFunctionTooltip />} />
                <Legend verticalAlign="top" />
                <Line 
                  type="monotone" 
                  dataKey="realPart" 
                  stroke="#8884d8" 
                  name="Real Part (Re[Ψ])" 
                  dot={false} 
                  strokeWidth={2} 
                />
                <Line 
                  type="monotone" 
                  dataKey="imagPart" 
                  stroke="#82ca9d" 
                  name="Imaginary Part (Im[Ψ])" 
                  dot={false}
                  strokeWidth={2} 
                />
                <Line 
                  type="monotone" 
                  dataKey="velocity" 
                  stroke="#ff7300" 
                  name="Bohmian Velocity (∇S/m)" 
                  dot={false}
                  strokeWidth={2} 
                />
                <Line 
                  type="monotone" 
                  dataKey="hiddenOrder" 
                  stroke="#ff0000" 
                  name="Hidden Order ⟨O(x)O(0)⟩" 
                  dot={false}
                  strokeWidth={2}
                  strokeDasharray="3 3" 
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
        </div>
        
        {/* Hidden Order Correlation and 11D Projection */}
        <div style={{backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 1px 3px rgba(0,0,0,0.1)'}}>
          <h4 style={{color: '#1e40af', fontSize: '18px', marginTop: '0'}}>
            Hidden Order Correlation in {dimension} Space
          </h4>
          <p style={{fontSize: '12px', color: '#666', marginBottom: '15px'}}>
            Visualizing correlation function ⟨O(x)O(y)⟩ as a projection from {dimension === '4D' ? '4D' : '11D'} space
          </p>
          <div style={{height: '300px'}}>
            <ResponsiveContainer width="100%" height="100%">
              <ScatterChart margin={{ top: 5, right: 30, left: 10, bottom: 5 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  type="number" 
                  dataKey="x" 
                  name="x" 
                  label={{ value: 'Dimension 1', position: 'insideBottomRight', offset: -10 }} 
                  domain={[-12, 12]}
                />
                <YAxis 
                  type="number" 
                  dataKey="y" 
                  name="y" 
                  label={{ value: 'Dimension 2', angle: -90, position: 'insideLeft' }} 
                  domain={[-12, 12]}
                />
                <ZAxis 
                  type="number" 
                  dataKey="z" 
                  range={[0, 500]} 
                  name="z" 
                />
                <Tooltip 
                  cursor={{ strokeDasharray: '3 3' }} 
                  formatter={(value) => value.toFixed(3)}
                />
                <Scatter 
                  name="Manifold Points" 
                  data={manifoldData} 
                  fill="#8884d8" 
                  shape="circle"
                />
              </ScatterChart>
            </ResponsiveContainer>
          </div>
<div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '10px'}}>
  <div style={{display: 'flex', alignItems: 'center'}}>
    <div style={{width: '12px', height: '12px', backgroundColor: '#1e3a8a', borderRadius: '50%', marginRight: '5px'}}></div>
    <span style={{fontSize: '12px'}}>Strong </span>
  </div>
  <div style={{display: 'flex', alignItems: 'center'}}>
    <div style={{width: '12px', height: '12px', backgroundColor: '#bfdbfe', borderRadius: '50%', marginRight: '5px'}}></div>
    <span style={{fontSize: '12px'}}>Weak </span>
  </div>
</div>
        </div>
      </div>
      
      {/* AdS/CFT Correspondence Visualization */}
      <div style={{backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginTop: '20px'}}>
        <h4 style={{color: '#1e40af', fontSize: '18px', marginTop: '0'}}>
          Holographic Principle: AdS/CFT Correspondence
        </h4>
        <p style={{fontSize: '12px', color: '#666', marginBottom: '15px'}}>
          Visualizing the relationship between bulk AdS space and boundary CFT: Z<sub>CFT</sub> = ∫Dϕe<sup>-S<sub>bulk</sub>[ϕ]</sup>
        </p>
        <div style={{width: '100%', height: '250px', backgroundColor: '#eff6ff', borderRadius: '8px', position: 'relative', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>
          <div style={{position: 'relative', width: '200px', height: '200px'}}>
            {/* Boundary circle (CFT) */}
            <div style={{
              position: 'absolute', 
              top: '0', 
              left: '0', 
              width: '100%', 
              height: '100%', 
              border: '4px solid #ef4444', 
              borderRadius: '50%'
            }}></div>
            
            {/* AdS bulk visualization with concentric circles */}
            {[0.8, 0.6, 0.4, 0.2].map((scale, idx) => (
              <div 
                key={idx}
                style={{
                  position: 'absolute',
                  top: '0',
                  left: '0',
                  width: '100%',
                  height: '100%',
                  borderRadius: '50%',
                  border: `${1 + (1-scale) * 3}px solid #3b82f6`,
                  transform: `scale(${scale})`,
                  opacity: 0.4 + ((1-scale) * 0.6)
                }}
              ></div>
            ))}
            
            {/* Central point representing deep bulk */}
            <div style={{
              position: 'absolute',
              top: '50%',
              left: '50%',
              width: '16px',
              height: '16px',
              backgroundColor: '#1d4ed8',
              borderRadius: '50%',
              transform: 'translate(-50%, -50%)'
            }}></div>
            
            {/* MERA Tensor Network representation for 11D */}
            {dimension === '11D' && (
              <div style={{
                position: 'absolute',
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                width: '100%',
                height: '100%',
                opacity: 0.4
              }}>
                <svg width="200" height="200" viewBox="-100 -100 200 200">
                  <g>
                    {/* Simplified tensor network - just showing a few nodes/connections */}
                    <circle cx="0" cy="0" r="5" fill="#1d4ed8" />
                    {[0, 45, 90, 135, 180, 225, 270, 315].map((angle) => {
                      const radians = angle * Math.PI / 180;
                      const x = 40 * Math.cos(radians);
                      const y = 40 * Math.sin(radians);
                      const x2 = 80 * Math.cos(radians);
                      const y2 = 80 * Math.sin(radians);
                      return (
                        <g key={angle}>
                          <circle cx={x} cy={y} r="3" fill="#3b82f6" />
                          <line x1="0" y1="0" x2={x} y2={y} stroke="#93c5fd" strokeWidth="1" />
                          <circle cx={x2} cy={y2} r="3" fill="#ef4444" />
                          <line x1={x} y1={y} x2={x2} y2={y2} stroke="#93c5fd" strokeWidth="1" />
                        </g>
                      );
                    })}
                  </g>
                </svg>
              </div>
            )}
          </div>
          
          <div style={{position: 'absolute', bottom: '10px', left: '10px', fontSize: '12px'}}>
            <div style={{display: 'flex', alignItems: 'center', marginBottom: '5px'}}>
              <div style={{width: '12px', height: '12px', border: '2px solid #ef4444', borderRadius: '50%', marginRight: '5px'}}></div>
              <span>CFT Boundary (Our 4D Reality)</span>
            </div>
            <div style={{display: 'flex', alignItems: 'center'}}>
              <div style={{width: '12px', height: '12px', backgroundColor: '#1d4ed8', borderRadius: '50%', marginRight: '5px'}}></div>
              <span>AdS Bulk (Higher Dimensions)</span>
            </div>
            {dimension === '11D' && (
              <div style={{display: 'flex', alignItems: 'center', marginTop: '5px'}}>
                <div style={{width: '12px', height: '12px', border: '1px solid #93c5fd', borderRadius: '50%', marginRight: '5px'}}></div>
                <span>MERA Tensor Network</span>
              </div>
            )}
          </div>
        </div>
      </div>
      
      {/* Key Equations Section */}
      <div style={{backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginTop: '20px'}}>
        <h4 style={{color: '#1e40af', fontSize: '18px', marginTop: '0'}}>
          Key Equations of HQR
        </h4>
        <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '10px', fontSize: '14px'}}>
          <div style={{padding: '10px', border: '1px solid #e5e7eb', borderRadius: '4px'}}>
            <p style={{fontWeight: '500', margin: '0 0 5px 0'}}>M-Theory Metric:</p>
            <p style={{fontFamily: 'monospace', margin: '0'}}>ds² = g<sub>μν</sub>dx<sup>μ</sup>dx<sup>ν</sup>, μ,ν = 0,1,...,10</p>
          </div>
          <div style={{padding: '10px', border: '1px solid #e5e7eb', borderRadius: '4px'}}>
            <p style={{fontWeight: '500', margin: '0 0 5px 0'}}>Bohmian Mechanics Guiding Equation:</p>
            <p style={{fontFamily: 'monospace', margin: '0'}}>dx/dt = ∇S/m</p>
            <p style={{fontFamily: 'monospace', margin: '5px 0 0 0'}}>Where Ψ = Re<sup>iS/ℏ</sup></p>
          </div>
          <div style={{padding: '10px', border: '1px solid #e5e7eb', borderRadius: '4px'}}>
            <p style={{fontWeight: '500', margin: '0 0 5px 0'}}>Hidden Order Correlation:</p>
            <p style={{fontFamily: 'monospace', margin: '0'}}>⟨O(x)O(y)⟩</p>
          </div>
          <div style={{padding: '10px', border: '1px solid #e5e7eb', borderRadius: '4px'}}>
            <p style={{fontWeight: '500', margin: '0 0 5px 0'}}>AdS/CFT Correspondence:</p>
            <p style={{fontFamily: 'monospace', margin: '0'}}>Z<sub>CFT</sub> = ∫Dϕe<sup>-S<sub>bulk</sub>[ϕ]</sup></p>
          </div>
        </div>
      </div>
      
      <div style={{fontSize: '12px', color: '#6b7280', marginTop: '10px'}}>
        <p>Note: This visualization is a simplified representation of the complex mathematical frameworks in HQR theory. The 11D visualization uses projections to represent higher-dimensional structures in a 3D space.</p>
      </div>
    </div>
  );
};

// Render the React component to the DOM
ReactDOM.render(
  <HQRVisualization />,
  document.getElementById('hqr-visualization-root')
);

<div class="visualization-container">
    <h2>Hidden Order Parameter Visualization</h2>
    <p>This visualization demonstrates the behavior of the Hidden Order Parameter (H) defined as H = I(A:B) = S<sub>A</sub> + S<sub>B</sub> - S<sub>A∪B</sub>, where I(A:B) is the mutual information between regions A and B, and S represents entanglement entropy.</p>
    
<!-- Add this section to your visualizations.html page -->
<div class="visualization-container">
    <h2>Hidden Order Parameter Visualization</h2>
    <p>This visualization demonstrates the behavior of the Hidden Order Parameter (H) defined as H = I(A:B) = S<sub>A</sub> + S<sub>B</sub> - S<sub>A∪B</sub>, where I(A:B) is the mutual information between regions A and B, and S represents entanglement entropy.</p>
    
    <div id="hidden-order-visualization-root"></div>
</div>

<!-- Add this script block after your existing visualization section -->
<script type="text/babel">
// Hidden Order Parameter Visualization Component
const HiddenOrderParameterVisualization = () => {
  const [separationMode, setSeparationMode] = React.useState('distance');
  const [orderMode, setOrderMode] = React.useState('standard');
  
  // Generate data showing how mutual information (hidden order parameter H) 
  // varies with distance or entanglement between regions
  const generateHiddenOrderData = (mode, orderType) => {
    const data = [];
    
    // Parameters that control the behavior of the hidden order
    const entropyBase = orderType === 'standard' ? 1.0 : 2.0;
    const decayRate = orderType === 'standard' ? 0.4 : 0.1;
    const fluctuation = orderType === 'standard' ? 0.0 : 0.2;
    
    for (let x = 0.1; x <= 10; x += 0.2) {
      // Calculate entanglement entropies based on the distance or entanglement
      const size = mode === 'distance' ? 1.0 : (1.5 + Math.sin(x));
      
      // Entanglement entropy of region A
      const entropyA = entropyBase * Math.log(size);
      
      // Entanglement entropy of region B
      const entropyB = entropyBase * Math.log(size);
      
      // Entanglement entropy of the union, which increases with distance
      // and has a slower growth than the sum of individual entropies
      let entropyUnion;
      if (mode === 'distance') {
        // For distance mode: mutual information decreases with distance
        entropyUnion = entropyA + entropyB - entropyBase * Math.exp(-decayRate * x);
      } else {
        // For entanglement mode: mutual information correlates with entanglement
        entropyUnion = entropyA + entropyB - entropyBase * (1 - Math.exp(-decayRate * x));
      }
      
      // Add some quantum fluctuations to the data if in "quantum" mode
      const randomFluctuation = orderType === 'quantum' ? 
        fluctuation * (Math.random() - 0.5) * Math.exp(-x/5) : 0;
      
      // Calculate the hidden order parameter H = I(A:B) = S_A + S_B - S_{A∪B}
      const hiddenOrderH = entropyA + entropyB - entropyUnion + randomFluctuation;
      
      data.push({
        x: x,
        entropyA: entropyA,
        entropyB: entropyB,
        entropyUnion: entropyUnion,
        hiddenOrderH: hiddenOrderH,
        // Include values for additional plots
        theoretical: mode === 'distance' ? 
          entropyBase * Math.exp(-decayRate * x) : 
          entropyBase * (1 - Math.exp(-decayRate * x))
      });
    }
    
    return data;
  };
  
  // Generate the data based on current mode
  const hiddenOrderData = generateHiddenOrderData(separationMode, orderMode);
  
  // Create another dataset for the phase transition
  const generatePhaseTransitionData = () => {
    const data = [];
    
    // Parameter that controls the transition point
    const criticalPoint = 5.0;
    const sharpness = 3.0;
    
    for (let x = 0.1; x <= 10; x += 0.2) {
      const beforeTransition = 0.05 + 0.8 / (1 + Math.exp(sharpness * (x - criticalPoint)));
      
      // Add some quantum fluctuations near the critical point
      const criticalFluctuations = 0.1 * Math.exp(-2 * Math.pow(x - criticalPoint, 2));
      
      data.push({
        x: x,
        hiddenOrderH: beforeTransition + (orderMode === 'quantum' ? criticalFluctuations : 0),
        criticalPoint: x === criticalPoint ? beforeTransition / 2 : null,
      });
    }
    
    return data;
  };
  
  const phaseTransitionData = generatePhaseTransitionData();

  // Get Recharts components
  const { 
    LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, 
    ResponsiveContainer, ScatterChart, Scatter, ZAxis 
  } = Recharts;

  return (
    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px', backgroundColor: '#f5f5f5', borderRadius: '8px' }}>
      <h2 style={{ color: '#333', textAlign: 'center', marginBottom: '20px' }}>
        Hidden Order Parameter Visualization
      </h2>
      
      <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '20px', gap: '20px' }}>
        <div>
          <label style={{ marginRight: '10px', fontWeight: 'bold' }}>Separation Type:</label>
          <select 
            value={separationMode} 
            onChange={(e) => setSeparationMode(e.target.value)}
            style={{ padding: '5px', borderRadius: '4px' }}
          >
            <option value="distance">Spatial Distance</option>
            <option value="entanglement">Entanglement Strength</option>
          </select>
        </div>
        <div>
          <label style={{ marginRight: '10px', fontWeight: 'bold' }}>Order Type:</label>
          <select 
            value={orderMode} 
            onChange={(e) => setOrderMode(e.target.value)}
            style={{ padding: '5px', borderRadius: '4px' }}
          >
            <option value="standard">Standard</option>
            <option value="quantum">Quantum Fluctuations</option>
          </select>
        </div>
      </div>
      
      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>
        {/* Hidden Order Parameter vs Distance/Entanglement */}
        <div style={{ backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
          <h3 style={{ color: '#333', marginTop: '0' }}>
            Hidden Order Parameter (H = I(A:B))
          </h3>
          <p style={{ fontSize: '14px', color: '#666' }}>
            H = S<sub>A</sub> + S<sub>B</sub> - S<sub>A∪B</sub> where S is the entanglement entropy
          </p>
          <div style={{ height: '300px' }}>
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={hiddenOrderData} margin={{ top: 5, right: 30, left: 20, bottom: 40 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  dataKey="x" 
                  label={{ 
                    value: separationMode === 'distance' ? 'Spatial Separation' : 'Entanglement Strength', 
                    position: 'insideBottom', 
                    offset: -5,
                    style: { textAnchor: 'middle' }
                  }}
                />
                <YAxis 
                  label={{ 
                    value: 'Hidden Order Parameter (H)', 
                    angle: -90, 
                    position: 'insideLeft',
                    style: { textAnchor: 'middle' } 
                  }}
                />
                <Tooltip formatter={(value) => value.toFixed(3)} />
                <Legend verticalAlign="top" />
                <Line 
                  type="monotone" 
                  dataKey="hiddenOrderH" 
                  stroke="#8884d8" 
                  name="Hidden Order (H)" 
                  strokeWidth={2}
                  dot={false}
                />
                <Line 
                  type="monotone" 
                  dataKey="theoretical" 
                  stroke="#82ca9d" 
                  name="Theoretical Model" 
                  strokeWidth={2}
                  strokeDasharray="5 5"
                  dot={false}
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
          <p style={{ fontSize: '12px', color: '#666', marginTop: '10px' }}>
            {separationMode === 'distance' ? 
              "As spatial separation increases, hidden order (mutual information) decreases exponentially, demonstrating the decay of quantum correlations with distance." :
              "As entanglement strength increases, hidden order increases, showing how stronger quantum correlations enhance the hidden order parameter."}
          </p>
        </div>
        
        {/* Entanglement Entropy Components Graph */}
        <div style={{ backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
          <h3 style={{ color: '#333', marginTop: '0' }}>
            Entanglement Entropy Components
          </h3>
          <p style={{ fontSize: '14px', color: '#666' }}>
            Showing S<sub>A</sub>, S<sub>B</sub>, and S<sub>A∪B</sub> used to calculate H
          </p>
          <div style={{ height: '300px' }}>
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={hiddenOrderData} margin={{ top: 5, right: 30, left: 20, bottom: 40 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  dataKey="x" 
                  label={{ 
                    value: separationMode === 'distance' ? 'Spatial Separation' : 'Entanglement Strength', 
                    position: 'insideBottom', 
                    offset: -5 
                  }}
                />
                <YAxis 
                  label={{ 
                    value: 'Entanglement Entropy', 
                    angle: -90, 
                    position: 'insideLeft' 
                  }}
                />
                <Tooltip formatter={(value) => value.toFixed(3)} />
                <Legend verticalAlign="top" />
                <Line 
                  type="monotone" 
                  dataKey="entropyA" 
                  stroke="#ff7300" 
                  name="S_A (Region A)" 
                  dot={false}
                  strokeWidth={2}
                />
                <Line 
                  type="monotone" 
                  dataKey="entropyB" 
                  stroke="#0088fe" 
                  name="S_B (Region B)" 
                  dot={false}
                  strokeWidth={2}
                />
                <Line 
                  type="monotone" 
                  dataKey="entropyUnion" 
                  stroke="#00C49F" 
                  name="S_A∪B (Union)" 
                  dot={false}
                  strokeWidth={2}
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
          <p style={{ fontSize: '12px', color: '#666', marginTop: '10px' }}>
            The difference between the sum of individual entropies (S<sub>A</sub> + S<sub>B</sub>) and the union entropy (S<sub>A∪B</sub>) 
            represents the hidden order parameter H. When the difference is large, strong quantum correlations exist between regions.
          </p>
        </div>
        
        {/* Phase Transition */}
        <div style={{ backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
          <h3 style={{ color: '#333', marginTop: '0' }}>
            Hidden Order Phase Transition
          </h3>
          <p style={{ fontSize: '14px', color: '#666' }}>
            Showing how a system transitions between ordered and disordered phases
          </p>
          <div style={{ height: '300px' }}>
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={phaseTransitionData} margin={{ top: 5, right: 30, left: 20, bottom: 40 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  dataKey="x" 
                  label={{ 
                    value: 'System Parameter (e.g., Temperature)', 
                    position: 'insideBottom', 
                    offset: -5 
                  }}
                />
                <YAxis 
                  label={{ 
                    value: 'Hidden Order Parameter (H)', 
                    angle: -90, 
                    position: 'insideLeft' 
                  }}
                />
                <Tooltip formatter={(value) => value !== null ? value.toFixed(3) : 'N/A'} />
                <Legend verticalAlign="top" />
                <Line 
                  type="monotone" 
                  dataKey="hiddenOrderH" 
                  stroke="#8884d8" 
                  name="Hidden Order (H)" 
                  dot={false}
                  strokeWidth={2}
                />
                <Scatter
                  name="Critical Point"
                  data={phaseTransitionData.filter(item => item.criticalPoint !== null)}
                  fill="red"
                  shape="star"
                  dataKey="criticalPoint"
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
          <p style={{ fontSize: '12px', color: '#666', marginTop: '10px' }}>
            As the system parameter increases, the hidden order parameter undergoes a phase transition. 
            Below the critical point, strong correlations exist (high hidden order). Above it, the system transitions 
            to a disordered state with minimal hidden order.
          </p>
        </div>
        
        {/* 3D Visualization */}
        <div style={{ backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
          <h3 style={{ color: '#333', marginTop: '0' }}>
            Hidden Order in 3D Parameter Space
          </h3>
          <p style={{ fontSize: '14px', color: '#666' }}>
            Visualizing how hidden order varies with multiple parameters
          </p>
          <div style={{ height: '300px' }}>
            <ResponsiveContainer width="100%" height="100%">
              <ScatterChart margin={{ top: 20, right: 20, bottom: 40, left: 20 }}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis 
                  type="number" 
                  dataKey="x" 
                  name="Parameter 1" 
                  domain={[0, 10]}
                  label={{ value: 'Parameter 1', position: 'insideBottom', offset: -5 }}
                />
                <YAxis 
                  type="number" 
                  dataKey="hiddenOrderH" 
                  name="Hidden Order (H)" 
                  label={{ value: 'Hidden Order (H)', angle: -90, position: 'insideLeft' }}
                />
                <ZAxis 
                  type="number" 
                  dataKey="theoretical" 
                  range={[20, 200]} 
                  name="Parameter 2" 
                />
                <Tooltip 
                  cursor={{ strokeDasharray: '3 3' }} 
                  formatter={(value, name) => [value.toFixed(3), name]}
                />
                <Legend />
                <Scatter 
                  name="Hidden Order in Parameter Space" 
                  data={hiddenOrderData} 
                  fill="#8884d8"
                />
              </ScatterChart>
            </ResponsiveContainer>
          </div>
          <p style={{ fontSize: '12px', color: '#666', marginTop: '10px' }}>
            This 3D visualization shows how hidden order varies across multiple parameters. 
            The size of each point represents a third parameter value, showing regions of parameter 
            space where hidden order is maximized (larger points indicate stronger correlation with 
            the theoretical model).
          </p>
        </div>
      </div>
      
      <div style={{ backgroundColor: 'white', padding: '15px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)', marginTop: '20px' }}>
        <h3 style={{ color: '#333', marginTop: '0' }}>Key Insights about Hidden Order Parameter</h3>
        <ul style={{ fontSize: '14px', color: '#333' }}>
          <li><strong>Definition:</strong> H = I(A:B) = S<sub>A</sub> + S<sub>B</sub> - S<sub>A∪B</sub> captures non-local quantum correlations</li>
          <li><strong>Physical Meaning:</strong> When H > 0, regions A and B share information despite spatial separation</li>
          <li><strong>Decay Properties:</strong> Hidden order typically decays with distance but can be enhanced by entanglement</li>
          <li><strong>Phase Transitions:</strong> Systems can transition between ordered (H > 0) and disordered (H ≈ 0) phases</li>
          <li><strong>Quantum Fluctuations:</strong> Can lead to local variations in hidden order strength, especially near critical points</li>
          <li><strong>Experimental Detection:</strong> Can be measured through mutual information in quantum many-body systems</li>
        </ul>
      </div>
    </div>
  );
};

// Render the hidden order visualization
ReactDOM.render(
  <HiddenOrderParameterVisualization />,
  document.getElementById('hidden-order-visualization-root')
);
</script>


    <div id="hidden-order-visualization-root"></div>
</div>
